<!DOCTYPE html>
<html>

<head>
  <title>Programme des Messes</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <script src="index.js"></script>
  
  <link href="dropAndDrap/dragula.css" rel="stylesheet" type="text/css">
  <link href="dropAndDrap/style.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="listFolder/listFolder.css" />
  
  <script src="dropAndDrap/jquery-latest.js"></script>
  <script src="../js/config.js"></script>
  <script src="dropAndDrap/jquery.js"></script>
  <script src="listFolder/listFolder.js"></script>
</head>

<body id="body">
    <table id="listAndProgram" style="height:100%;width:100%">
      <tbody>
        <button id="back-button" class="back-button" onclick="redimensionner()">
          &larr; Cacher
        </button>
        <tr>
          <div id="button_entete" style="background-color: #aeb1b3;">
            <button class="but" onclick='window.open(window.location.origin, "_self")'><img src = "icon/home.png" style="margin-right: 12px;">Home</button>
            <button class="but" onclick='share_prog()'><img src = "icon/forward.png" style="margin-right: 12px;">Partager</button>
            <button class="but" onclick='window.open(window.location.origin + "/explorer", "_blank")' style="float: right;"><img src = "icon/pdf.png" style="margin-right: 12px;">Ouvrir l'exporateur de partitions</button>
          </div>
        </tr>
        <script>
          console.log("info messes : !!!!!!");
          console.log(new URLSearchParams(location.search));
          console.log(location);
          if((new URLSearchParams(location.search)).get('_ts'))
          {
            document.getElementById("button_entete").style.visibility = "hidden";
            document.getElementById("button_entete").style.position = "absolute";
            if (userAgent.includes('iphone') || userAgent.includes('android') || userAgent.includes('mobile')) {
              document.getElementById("listAndProgram").style.fontSize="0.4em";
            }
          }
        </script>
        <tr>
            <!-- Partie liste des programmes -->
            <td id="block_liste" style="position:relative">
                <div style="overflow-x:auto;position:absolute;height:100%;width:100%;top:0px;left:0px;">
                <table class="listprogramme" style="position:relative;height:100%">
                    <thead style="position: sticky; top: 0;height:25px;z-index:5"> <!-- action sur la liste des programmes -->
                        <th>
                          <button class = "btn" id="btn-list-copy" onclick="action('btn-list-copy')"><img src = "icon/copy.png">Copier vers</button>
                          <button class = "btn" onclick="action('btn-list-delete')"><img src = "icon/delete.png">Supprimer</button>
                          <button class = "btn" onclick="action('btn-list-paroisse')"><img src = "icon/plus.png">Paroisse</button>
                          <button class = "btn" onclick="action('btn-list-add')"><img src = "icon/plus.png">Programme</button>
                          <button class = "btn" onclick="action('btn-list-modify')"><img src = "icon/pen.png">Modifier</button>
                          <button class = "btn" onclick="action('btn-list-download')"><img src = "icon/forward.png">Exporter</button>
                        </th>
                    </thead>
                    <tbody style="bottom:0px">
                        <tr>
                            <td style="padding:2%;vertical-align:top">
                            <div id="mesdossiers" style="height:100%;position:relative;overflow: scroll;"></div>
                            <script>
                                tousLesRepertoires();
                                var dossier_ouvert = [];
                            </script>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </div>
            </td>
            
            <!-- Partie programme -->
            <td id="block_program" style="position:relative">
                <div id="div_program" style="overflow-x:auto;position:absolute;height:100%;width:100%;top:0px;left:0px;">
                <table class="programme" style="position:relative;height:100%">
                    <thead style="position: sticky; top: 0;height:25px;z-index:5">
                        <th>
                          <button id="btn-prog-save" class = "btn" onclick="action('btn-prog-save')" style="background-color: #757575;"><img src = "icon/save.png">Sauvegarder</button>
                          <!--<button onclick="action('btn-prog-copy')" style="background-color: #757575;"><img src = "icon/copy.png">Copier vers</button>-->
                          <button class = "btn" onclick="action('btn-prog-delete')"><img src = "icon/delete.png">Supprimer</button>
                          <button class = "btn" onclick="action('btn-prog-add')"><img src = "icon/plus.png">Ajouter</button>
                          <button class = "btn" onclick="action('btn-prog-modify')"><img src = "icon/pen.png">Modifier</button>
                          <button class = "btn" onclick="action('btn-prog-download')"><img src = "icon/download.png">Tous les fichiers</button>
                        </th>
                    </thead>
                    <tbody style="bottom:0px">
                        <tr>
                            <td>
                                <div id="div_dropAndDrap" class="parent" style="bottom: 0;overflow: scroll;">
                                    <div class="wrapper">
                                    <div id="sortable" class="dropAndDrap">
                                        <div></div>
                                    </div>
                                    </div>
                                </div>
                                    <script src="dropAndDrap/dragula.js"></script>
                                    <script src="dropAndDrap/dropAndDrap.js"></script>
                                    <script src="dropAndDrap/app.js"></script>
                                <script>
                                    $(document).ready(function() {
                                        let params = (new URLSearchParams(location.search)).get('_pathfile');
                                        if(params != null)
                                        {
                                          init(params);
                                        }
                                    });
                                </script>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </div>
            </td>
        </tr>
      </tbody>
    </table>

    <script src="screen.js"></script>
</body>
</html>
